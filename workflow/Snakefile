include: "rules/00_common.smk"

##### Target rules #####


rule all:
    input:
#        # Reference, index and dictionary
#        config["ref_prefix"] + ".fasta",
#        config["ref_prefix"] + ".fasta.fai",
#        config["ref_prefix"] + ".dict",
#        # F0
#        expand(os.path.join(config["working_dir"], "sams/F0/mapped/{sample}-{unit}.sam"),
#                zip,
#                sample = samples['sample'],
#                unit = samples['unit']
#        ),
#        expand(os.path.join(config["working_dir"], "sams/F0/grouped/{sample}-{unit}.sam"),
#                zip,
#                sample = samples['sample'],
#                unit = samples['unit']
#        ),
#        expand(os.path.join(config["working_dir"], "bams/F0/sorted/{sample}-{unit}.bam"),
#                zip,
#                sample = samples['sample'],
#                unit = samples['unit']
#        ),
#        expand(os.path.join(config["working_dir"], "bams/F0/marked/{sample}-{unit}.bam"),
#                zip,
#                sample = samples['sample'],
#                unit = samples['unit']                
#        ),
#        expand(os.path.join(config["working_dir"], "bams/F0/merged/{sample}.bam"),
#                sample = list(set(samples['sample']))
#        ),
#        expand(os.path.join(config["working_dir"], "vcfs/F0/gvcfs/{sample}/{contig}.g.vcf"),
#                sample = list(set(samples['sample'])),
#                contig = get_contigs(),
#        ),
#        expand(os.path.join(config["working_dir"], "vcfs/F0/combined/all.{contig}.g.vcf.gz"),
#                contig = get_contigs(),
#        ),
#        expand(os.path.join(config["working_dir"], "vcfs/F0/genotyped/all.{contig}.vcf.gz"),
#                contig = get_contigs(),
#        ),
#        expand(os.path.join(config["working_dir"], "vcfs/F0/final/all.vcf.gz")),
################
# 04_F2_calling_blocks.smk
################
#        expand(os.path.join(config["working_dir"], "data/sites_files/F0_Cab_Kaga/all_sites/{contig}.csv"),
#                contig = get_contigs()
#        ),
#        expand(os.path.join(config["working_dir"], "data/sites_files/F0_Cab_Kaga/divergent/{contig}.txt"),
#                contig = get_contigs()
#        ),
#        os.path.join(config["working_dir"], "data/sites_files/F0_Cab_Kaga/final/all.txt"),
#        expand(os.path.join(config["working_dir"], "sams/F2/mapped/{sample}.sam"),
#                sample = F2_samples['LANE']
#        ),
        expand(os.path.join(config["working_dir"], "bams/F2/bwamem/sorted/{sample}.bam"),
                sample = F2_samples['LANE']
        )

##### Modules #####

include: "rules/01_ref.smk"
include: "rules/02_F0_mapping.smk"
include: "rules/03_F0_calling.smk"
include: "rules/04_F2_calling_blocks.smk"
